{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d734b7f6_68c39c9b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T01:43:02Z",
      "side": 1,
      "message": "Kinda works. Error / status codes need to be handled properly.",
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "573c3d65_84607349",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T01:48:52Z",
      "side": 1,
      "message": "I opened this in Android Studio first but it wanted me to update gradle and that became a rabbit hole (I tried), so I gave up on that for now.\n\nRealised that I could still test things this way.\n\nThis is built in the OS (till gradle is updated), but it can be installed as a user app, and allows silent upgrades :)",
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7931191e_bab85cfd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2022-04-29T07:31:31Z",
      "side": 1,
      "message": "I\u0027m not sure what the context or reason for this change is.  Is this a required change because of a new API?  Is there some background info somewhere?",
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "37445ebe_a28f8416",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T10:23:07Z",
      "side": 1,
      "message": "Not required, but rather nice to have.\n\nWe mostly care about auto updates, this lets us do that without having to provide privileged permissions, and that\u0027s always a good thing.\n\nBonus point is that this approach will work for any Android 12 device - this app can now be installed as a user app and allow silent updates like I mentioned earlier.",
      "parentUuid": "7931191e_bab85cfd",
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d86ca23_05318c5f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2022-04-29T10:40:07Z",
      "side": 1,
      "message": "Sounds interesting with some nice potential benefits.  I\u0027m still trying to figure out all the details.  Are you thinking that this is a short term workaround or something to support in the long term?  Do you have a reason beyond targetSdkVersion to handle this in the extension rather than directly in the app (e.g. Aurora or F-Droid)?\n\nI\u0027m guessing this extension will then:\n* show an extra prompt on new installs\n* not allow auto-updates for apps that do not meet the criteria required by this new API, e.g. targetSdkVersion \u003c 31.\n\nSay that F-Droid can implement everything it needs with targetSdkVersion 31, is there any reason to keep using the old DefaultInstaller API?  I\u0027m thinking can standardize F-Droid on two installer APIs, DefaultInstaller (with either new or old API) and ExtensionInstaller (basically, the current PrivilegedInstaller but which supports more than one official extension).  Then this version could be shipped on f-droid.org in addition to Privileged Extension, and F-Droid could support both FPE and this.",
      "parentUuid": "37445ebe_a28f8416",
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0034fd04_1f7a6c7b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T11:05:19Z",
      "side": 1,
      "message": "It\u0027s short term, just for target sdk, once fdroidclient is at 31 this would be moot, no need for the additional complexity.\n\nAlso the criteria for apps being updated is sdk \u003e\u003d 29",
      "parentUuid": "5d86ca23_05318c5f",
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e01cafd_14056181",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 138,
      "author": {
        "id": 1000034
      },
      "writtenOn": "2022-04-29T10:24:44Z",
      "side": 1,
      "message": "setFlags might be wrong, addFlags to avoid overriding any other flag\nIn some CTS tests they set FLAG_ACTIVITY_CLEAR_TASK too, not sure if we want it",
      "range": {
        "startLine": 138,
        "startChar": 24,
        "endLine": 138,
        "endChar": 32
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47be271b_037e5adc",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 140,
      "author": {
        "id": 1000034
      },
      "writtenOn": "2022-04-29T10:24:44Z",
      "side": 1,
      "message": "I\u0027d rather always be conservative and check if the other received broadcast is what we expect, what is it in this case?\nI\u0027m a bit lost of how we create the intent, but I guess we\u0027re doing it manually in doPackageStage, scary.",
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a0c59d8_84d45a54",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 157,
      "author": {
        "id": 1000034
      },
      "writtenOn": "2022-04-29T10:24:44Z",
      "side": 1,
      "message": "https://cs.android.com/android/platform/superproject/+/master:frameworks/base/packages/PackageInstaller/src/com/android/packageinstaller/InstallInstalling.java;l\u003d293?q\u003dPackageInstaller.Session\u0026ss\u003dandroid\nMight be worth checking out the new setup AOSP is using\nThe in/out is mostly the same but there are new additions to the params",
      "range": {
        "startLine": 157,
        "startChar": 17,
        "endLine": 157,
        "endChar": 31
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "721db426_7ffeab53",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 166,
      "author": {
        "id": 1000034
      },
      "writtenOn": "2022-04-29T10:24:44Z",
      "side": 1,
      "message": "AOSP is now doing 1024 * 1024",
      "range": {
        "startLine": 166,
        "startChar": 43,
        "endLine": 166,
        "endChar": 48
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "49e48df8_dbc147c4",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 186,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-04-29T10:00:02Z",
      "side": 1,
      "message": "Does it need to be mutable?",
      "range": {
        "startLine": 186,
        "startChar": 56,
        "endLine": 186,
        "endChar": 82
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "96a24b19_94fbf906",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 186,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T10:23:07Z",
      "side": 1,
      "message": "Yes",
      "parentUuid": "49e48df8_dbc147c4",
      "range": {
        "startLine": 186,
        "startChar": 56,
        "endLine": 186,
        "endChar": 82
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05b31b4c_703b2cc6",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 238,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2022-04-29T10:00:02Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 238,
        "startChar": 60,
        "endLine": 238,
        "endChar": 86
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9808175a_b8c3cefd",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 238,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2022-04-29T10:23:07Z",
      "side": 1,
      "message": "Yes",
      "parentUuid": "05b31b4c_703b2cc6",
      "range": {
        "startLine": 238,
        "startChar": 60,
        "endLine": 238,
        "endChar": 86
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea704b18_295a8786",
        "filename": "app/src/main/java/org/fdroid/fdroid/privileged/PrivilegedService.java",
        "patchSetId": 2
      },
      "lineNbr": 310,
      "author": {
        "id": 1000034
      },
      "writtenOn": "2022-04-29T10:24:44Z",
      "side": 1,
      "message": "Is this doing what you expect?\nI\u0027d make a single intent and then add another action.\nI\u0027m not sure the INSTALL is handled correctly?",
      "range": {
        "startLine": 303,
        "startChar": 0,
        "endLine": 310,
        "endChar": 100
      },
      "revId": "f0b5f15b75a5767f917871ccee1334caea902ac3",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}